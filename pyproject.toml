[project]
name = "resselt"
version = "0.1.0"
description = "Package for recognizing and executing Image Super-Resolution PyTorch architectures"
authors = [{ name = "Sekiju" }, { name = "umzi" }]
requires-python = ">=3.10"
dependencies = ["torch", "torchvision", "einops", "safetensors"]

[system-requirements]
cuda = "12.1"

[build-system]
requires = ["pdm-backend"]
build-backend = "pdm.backend"

[tool.pixi.project]
channels = ["nvidia", "pytorch", "conda-forge"]
platforms = ["win-64", "linux-64"]
conda-pypi-map = { "pytorch" = "https://public.yor.ovh/pytorch_mapping.json" }

[tool.pixi.pypi-dependencies]
resselt = { path = ".", editable = true }

[tool.pixi.environments]
default = { solve-group = "default" }
dev = { features = ["dev"], solve-group = "default" }
build = { features = ["build"], solve-group = "default" }

[tool.pixi.dependencies]
pytorch = { version = ">=2.3.0,<2.4", channels = ["pytorch"] }
torchvision = { version = ">=0.18.0,<0.19", channels = ["pytorch"] }
pytorch-cuda = { version = "12.1.*", channels = ["pytorch"] }
einops = ">=0.8.0,<0.9"
safetensors = ">=0.4.3,<0.5"

[tool.pixi.feature.dev.tasks]
test = "pytest"
test-update = "pytest --snapshot-update"

[tool.pixi.feature.dev.dependencies]
pixi-pycharm = ">=0.0.5,<0.1"
pytest = ">=7.2.0,<7.3"
ruff = ">=0.5.0,<0.6"
pre-commit = ">=3.7.1,<3.8"
requests = ">=2.32.3,<2.33"
syrupy = ">=4.6.1,<4.7"

[tool.pixi.feature.dev.pypi-dependencies]
pepeline = ">=0.3.7"

[tool.pixi.feature.build.tasks]
build = "python -m build --no-isolation --wheel ."

[tool.pixi.feature.build.dependencies]
build = "*"
pdm-backend = "*"
